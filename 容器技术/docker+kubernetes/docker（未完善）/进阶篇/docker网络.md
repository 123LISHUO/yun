# ğŸ³Dockerç½‘ç»œ

![1670060596498](image/dockerç½‘ç»œ/1670060596498.png)
![1670072254352](image/dockerç½‘ç»œ/1670072254352.png)


## ğŸ°what is it

#### when docker is dead,é»˜è®¤ç½‘ç»œæƒ…å†µ

![1670059168001](image/dockerç½‘ç»œ/1670059168001.png)

åœ¨CentOS7çš„å®‰è£…è¿‡ç¨‹ä¸­å¦‚æœæœ‰é€‰æ‹©ç›¸å…³è™šæ‹ŸåŒ–çš„çš„æœåŠ¡å®‰è£…ç³»ç»Ÿåï¼Œå¯åŠ¨ç½‘å¡æ—¶ä¼šå‘ç°æœ‰ä¸€ä¸ªä»¥ç½‘æ¡¥è¿æ¥çš„ç§ç½‘åœ°å€çš„virbr0ç½‘å¡(virbr0ç½‘å¡ï¼šå®ƒè¿˜æœ‰ä¸€ä¸ªå›ºå®šçš„é»˜è®¤IPåœ°å€192.168.122.1)ï¼Œæ˜¯åšè™šæ‹Ÿæœºç½‘æ¡¥çš„ä½¿ç”¨çš„ï¼Œå…¶ä½œç”¨æ˜¯ä¸ºè¿æ¥å…¶ä¸Šçš„è™šæœºç½‘å¡æä¾› NATè®¿é—®å¤–ç½‘çš„åŠŸèƒ½ã€‚

æˆ‘ä»¬ä¹‹å‰å­¦ä¹ Linuxå®‰è£…ï¼Œå‹¾é€‰å®‰è£…ç³»ç»Ÿçš„æ—¶å€™é™„å¸¦äº†libvirtæœåŠ¡æ‰ä¼šç”Ÿæˆçš„ä¸€ä¸ªä¸œè¥¿ï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥ç›´æ¥å°†libvirtdæœåŠ¡å¸è½½ï¼Œ

yum remove libvirt-libs.x86_64

#### when docker is activeï¼Œç½‘ç»œæƒ…å†µã€‚

![1670059246141](image/dockerç½‘ç»œ/1670059246141.png)

##### æŸ¥çœ‹dockerç½‘ç»œæ¨¡å¼å‘½ä»¤

![1670059339901](image/dockerç½‘ç»œ/1670059339901.png)

## ğŸ¶å¸¸ç”¨åŸºæœ¬å‘½ä»¤

```md
docker network --help:

Commands:
  connect     Connect a container to a network
  create  networkname  | Create a network
  disconnect  Disconnect a container from a network
  inspect   networkname |  Display detailed information on one or more networks
  ls          List networks
  prune       Remove all unused networks
  rm    networkname  |   Remove one or more networks
```

## ğŸ·what can it doï¼š

å®¹å™¨ä¹‹é—´çš„äº’è”å’Œé€šä¿¡ä»¥åŠç«¯å£æ˜ å°„

å®¹å™¨IPå˜åŠ¨çš„æ—¶å€™å¯ä»¥é€šè¿‡æœåŠ¡åç›´æ¥ç½‘ç»œé€šä¿¡è€Œä¸å—å½±å“

## ğŸ¦‹ç½‘ç»œæ¨¡å¼(network model)

#### æ€»ä½“ä»‹ç»

![1670060915336](image/dockerç½‘ç»œ/1670060915336.png)

![1670060951815](image/dockerç½‘ç»œ/1670060951815.png)

#### å®¹å™¨å®ä¾‹å†…é»˜è®¤ç½‘ç»œIPç”Ÿäº§è§„åˆ™

###### è¯´æ˜ï¼š

1ã€å¼€å¯ä¸¤ä¸ªUbuntuå®ä¾‹

```md
[root@localhost ~]# docker run -it --name=u3 ubuntu bash
root@e3fa63207b69:/# [root@localhost ~]#
[root@localhost ~]# docker run -it --name=u4 ubuntu bash
root@e3fa63207b69:/# [root@localhost ~]#
```

2ã€æŸ¥çœ‹ip

```md
[root@localhost ~]# docker inspect u3 |tail -20
            "Networks": {
                "bridge": {
                    "IPAMConfig": null,
                    "Links": null,
                    "Aliases": null,
                    "NetworkID": "654e6701165eb87d791eb2d2cac895fbf0f3891625915ced39ddac743ae0f1ca",
                    "EndpointID": "90308dbf44e58ee7f5a4c3dd3fc29b2111c3ec3bf5904210a20fbe6b7dba094c",
                    "Gateway": "172.17.0.1",
                    "IPAddress": "172.17.0.2",
                    "IPPrefixLen": 16,
                    "IPv6Gateway": "",
                    "GlobalIPv6Address": "",
                    "GlobalIPv6PrefixLen": 0,
                    "MacAddress": "02:42:ac:11:00:02",
                    "DriverOpts": null
                }
            }
        }
    }
]

[root@localhost ~]# docker inspect u4 |tail -20
            "Networks": {
                "bridge": {
                    "IPAMConfig": null,
                    "Links": null,
                    "Aliases": null,
                    "NetworkID": "654e6701165eb87d791eb2d2cac895fbf0f3891625915ced39ddac743ae0f1ca",
                    "EndpointID": "915404f1f150f0bb6cbac9cceedcc747ad4c443d8b10a51a1e196978adc37805",
                    "Gateway": "172.17.0.1",
                    "IPAddress": "172.17.0.3",
                    "IPPrefixLen": 16,
                    "IPv6Gateway": "",
                    "GlobalIPv6Address": "",
                    "GlobalIPv6PrefixLen": 0,
                    "MacAddress": "02:42:ac:11:00:03",
                    "DriverOpts": null
                }
            }
        }
    }
]
```

3ã€å½“æŠŠu4å…³é—­ï¼Œæ–°å»ºu5å®ä¾‹,u4çš„ipä¼šç»™åˆ°u5

```md
[root@localhost ~]# docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED          STATUS          PORTS     NAMES
e024f232a15c   ubuntu    "bash"    30 minutes ago   Up 30 minutes             u3
[root@localhost ~]# docker run   --name=u5 -it ubuntu bash
root@6069e33bdedf:/# [root@localhost ~]# docker inspect u5 |tail -20
            "Networks": {
                "bridge": {
                    "IPAMConfig": null,
                    "Links": null,
                    "Aliases": null,
                    "NetworkID": "654e6701165eb87d791eb2d2cac895fbf0f3891625915ced39ddac743ae0f1ca",
                    "EndpointID": "dd382258e5b564f727eb7db6c224bc652771d2941ad03ff0ad99f120bf4df386",
                    "Gateway": "172.17.0.1",
                    "IPAddress": "172.17.0.3",
                    "IPPrefixLen": 16,
                    "IPv6Gateway": "",
                    "GlobalIPv6Address": "",
                    "GlobalIPv6PrefixLen": 0,
                    "MacAddress": "02:42:ac:11:00:03",
                    "DriverOpts": null
                }
            }
        }
    }
]

```

![1670070297302](image/dockerç½‘ç»œ/1670070297302.png)

###### ç»“è®ºï¼š

dockerå®¹å™¨å†…éƒ¨çš„IPæ˜¯æœ‰å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜çš„

#### å®æ“ï¼š

å¥½æ¯”è¦å–å¥¶èŒ¶ï¼Œè¿™é‡Œæœ‰ä¸ªæ¯(lo)ï¼Œé‡Œé¢è£…çš„å¥¶èŒ¶(ens33)ï¼Œè¿˜æœ‰ä¸ªå¥¶èŒ¶ç›–å­ï¼Œç›–å­ä¸Šæœ‰æ’å¸ç®¡çš„å£å­(ç«¯å£ -p)ï¼Œè¿˜æœ‰ä¸ªå¸ç®¡ã€‚

###### 1ã€bridge:

```md
é€šä¿—è§£é‡Šï¼šu1è¦å–å¥¶èŒ¶ï¼Œè€Œå¥¶èŒ¶æ¯çš„ç›–å­(bridge),æ˜¯è‡ªå¸¦çš„ï¼Œä¸Šé¢æœ‰æ’å¸ç®¡çš„å£å­ï¼Œä½ å¯ä»¥æ’ä¸ªå¸ç®¡åœ¨ç›–å­ä¸Šçš„å¸ç®¡å£ï¼Œæ‰€ä»¥u1å‘¢å°±æ˜¯ç”¨å¸ç®¡æ’è¿›ç›–å­çš„å£å­é‡Œï¼Œè¿›è¡Œå–å¥¶èŒ¶ã€‚
```

```md
docker run -it --name=c1 centos/vim:7.5.1804 /bin/bash

å¦‚å›¾ï¼Œåœ¨å®¹å™¨é‡Œï¼Œè¿›è¡Œip aï¼Œå®¹å™¨å¤–çš„vethå¯¹åº”å®¹å™¨å†…çš„eth0
[root@19615c455cd1 /]# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
19: eth0@if20: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default 
    link/ether 02:42:ac:11:00:04 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet 172.17.0.4/16 brd 172.17.255.255 scope global eth0
       valid_lft forever preferred_lft forever

é€€å‡ºå
[root@localhost ~]# ip a
20: vethc73d44c@if19: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue master docker0 state UP group default 
    link/ether 66:c7:08:e0:95:5c brd ff:ff:ff:ff:ff:ff link-netnsid 2
    inet6 fe80::64c7:8ff:fee0:955c/64 scope link 
       valid_lft forever preferred_lft forever
```

```md
bridgeä»‹ç»ï¼š
Docker æœåŠ¡é»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ª docker0 ç½‘æ¡¥ï¼ˆå…¶ä¸Šæœ‰ä¸€ä¸ª docker0 å†…éƒ¨æ¥å£ï¼‰ï¼Œ
è¯¥æ¡¥æ¥ç½‘ç»œçš„åç§°ä¸ºdocker0ï¼Œå®ƒåœ¨å†…æ ¸å±‚è¿é€šäº†å…¶ä»–çš„ç‰©ç†æˆ–è™šæ‹Ÿç½‘å¡ï¼Œ
è¿™å°±å°†æ‰€æœ‰å®¹å™¨å’Œæœ¬åœ°ä¸»æœºéƒ½æ”¾åˆ°åŒä¸€ä¸ªç‰©ç†ç½‘ç»œã€‚
Docker é»˜è®¤æŒ‡å®šäº† docker0 æ¥å£ çš„ IP åœ°å€å’Œå­ç½‘æ©ç ï¼Œ
è®©ä¸»æœºå’Œå®¹å™¨ä¹‹é—´å¯ä»¥é€šè¿‡ç½‘æ¡¥ç›¸äº’é€šä¿¡ã€‚
```

```md
1 Dockerä½¿ç”¨Linuxæ¡¥æ¥ï¼Œåœ¨å®¿ä¸»æœºè™šæ‹Ÿä¸€ä¸ªDockerå®¹å™¨ç½‘æ¡¥(docker0)ï¼ŒDockerå¯åŠ¨ä¸€ä¸ªå®¹å™¨æ—¶ä¼šæ ¹æ®Dockerç½‘æ¡¥çš„ç½‘æ®µåˆ†é…ç»™å®¹å™¨ä¸€ä¸ªIPåœ°å€ï¼Œç§°ä¸ºContainer-IPï¼ŒåŒæ—¶Dockerç½‘æ¡¥æ˜¯æ¯ä¸ªå®¹å™¨çš„é»˜è®¤ç½‘å…³ã€‚å› ä¸ºåœ¨åŒä¸€å®¿ä¸»æœºå†…çš„å®¹å™¨éƒ½æ¥å…¥åŒä¸€ä¸ªç½‘æ¡¥ï¼Œè¿™æ ·å®¹å™¨ä¹‹é—´å°±èƒ½å¤Ÿé€šè¿‡å®¹å™¨çš„Container-IPç›´æ¥é€šä¿¡ã€‚

2 docker run çš„æ—¶å€™ï¼Œæ²¡æœ‰æŒ‡å®šnetworkçš„è¯é»˜è®¤ä½¿ç”¨çš„ç½‘æ¡¥æ¨¡å¼å°±æ˜¯bridgeï¼Œä½¿ç”¨çš„å°±æ˜¯docker0ã€‚åœ¨å®¿ä¸»æœºifconfig,å°±å¯ä»¥çœ‹åˆ°docker0å’Œè‡ªå·±createçš„network(åé¢è®²)eth0ï¼Œeth1ï¼Œeth2â€¦â€¦ä»£è¡¨ç½‘å¡ä¸€ï¼Œç½‘å¡äºŒï¼Œç½‘å¡ä¸‰â€¦â€¦ï¼Œloä»£è¡¨127.0.0.1ï¼Œå³localhostï¼Œinet addrç”¨æ¥è¡¨ç¤ºç½‘å¡çš„IPåœ°å€

3 ç½‘æ¡¥docker0åˆ›å»ºä¸€å¯¹å¯¹ç­‰è™šæ‹Ÿè®¾å¤‡æ¥å£ä¸€ä¸ªå«vethï¼Œå¦ä¸€ä¸ªå«eth0ï¼Œæˆå¯¹åŒ¹é…ã€‚

Â Â Â 3.1 æ•´ä¸ªå®¿ä¸»æœºçš„ç½‘æ¡¥æ¨¡å¼éƒ½æ˜¯docker0ï¼Œç±»ä¼¼ä¸€ä¸ªäº¤æ¢æœºæœ‰ä¸€å †æ¥å£ï¼Œæ¯ä¸ªæ¥å£å«vethï¼Œåœ¨æœ¬åœ°ä¸»æœºå’Œå®¹å™¨å†…åˆ†åˆ«åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæ¥å£ï¼Œå¹¶è®©ä»–ä»¬å½¼æ­¤è”é€šï¼ˆè¿™æ ·ä¸€å¯¹æ¥å£å«veth pairï¼‰ï¼›

Â Â Â 3.2 æ¯ä¸ªå®¹å™¨å®ä¾‹å†…éƒ¨ä¹Ÿæœ‰ä¸€å—ç½‘å¡ï¼Œæ¯ä¸ªæ¥å£å«eth0ï¼›

Â Â Â 3.3 docker0ä¸Šé¢çš„æ¯ä¸ªvethåŒ¹é…æŸä¸ªå®¹å™¨å®ä¾‹å†…éƒ¨çš„eth0ï¼Œä¸¤ä¸¤é…å¯¹ï¼Œä¸€ä¸€åŒ¹é…ã€‚

Â é€šè¿‡ä¸Šè¿°ï¼Œå°†å®¿ä¸»æœºä¸Šçš„æ‰€æœ‰å®¹å™¨éƒ½è¿æ¥åˆ°è¿™ä¸ªå†…éƒ¨ç½‘ç»œä¸Šï¼Œä¸¤ä¸ªå®¹å™¨åœ¨åŒä¸€ä¸ªç½‘ç»œä¸‹,ä¼šä»è¿™ä¸ªç½‘å…³ä¸‹å„è‡ªæ‹¿åˆ°åˆ†é…çš„ipï¼Œæ­¤æ—¶ä¸¤ä¸ªå®¹å™¨çš„ç½‘ç»œæ˜¯äº’é€šçš„ã€‚
```

![1670079710862](image/dockerç½‘ç»œ/1670079710862.png)

###### 2ã€host:

```md
é€šä¿—è§£é‡Šï¼š
ç½‘ç»œæ¨¡å¼å°±æ˜¯ç›´æ¥æŠŠå¥¶èŒ¶ç›–å­æ€å¼€ï¼Œç›´æ¥å–
è¿™ä¸å°±æ˜¯ä¸ä¸åœ¨dockerå†…ï¼Œåœ¨centosé‡Œéƒ¨ç½²Tomcatçš„ç½‘ç»œä¸€æ ·å˜›ï¼Œç›´æ¥ç”¨ä¸»æœºçš„
åœ¨Tomcaté‡Œè¿›è¡Œip aä¸åœ¨centosä¸»æœºé‡Œip a ä¸€æ¨¡ä¸€æ ·
```

```md
ä¼šæœ‰è­¦å‘Šï¼š
docker run -d -p 8081:8080  --network=host --name=t1 tomcat 
WARNINGï¼šPublishd ports are discarded when using host network mode

é—®é¢˜ï¼š

     dockeå¯åŠ¨æ—¶æ€»æ˜¯é‡è§æ ‡é¢˜ä¸­çš„è­¦å‘Š

åŸå› ï¼š

    dockerå¯åŠ¨æ—¶æŒ‡å®š--network=hostæˆ–-net=hostï¼Œå¦‚æœè¿˜æŒ‡å®šäº†-pæ˜ å°„ç«¯å£ï¼Œé‚£è¿™ä¸ªæ—¶å€™å°±ä¼šæœ‰æ­¤è­¦å‘Šï¼Œ

å¹¶ä¸”é€šè¿‡-pè®¾ç½®çš„å‚æ•°å°†ä¸ä¼šèµ·åˆ°ä»»ä½•ä½œç”¨ï¼Œç«¯å£å·ä¼šä»¥ä¸»æœºç«¯å£å·ä¸ºä¸»ï¼Œé‡å¤æ—¶åˆ™é€’å¢ã€‚

è§£å†³:

    è§£å†³çš„åŠæ³•å°±æ˜¯ä½¿ç”¨dockerçš„å…¶ä»–ç½‘ç»œæ¨¡å¼ï¼Œä¾‹å¦‚--network=bridgeï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³é—®é¢˜ï¼Œæˆ–è€…ç›´æ¥æ— è§†ã€‚ã€‚ã€‚ã€‚O(âˆ©_âˆ©)Oå“ˆå“ˆ~
```

```md
æ— è­¦æŠ¥:
docker run -d        --network=host --name=t1 tomcat

è®¿é—®Tomcat
http://å®¿ä¸»æœºIP:8080/

åœ¨CentOSé‡Œé¢ç”¨é»˜è®¤çš„ç«ç‹æµè§ˆå™¨è®¿é—®å®¹å™¨å†…çš„tomcat83çœ‹åˆ°è®¿é—®æˆåŠŸï¼Œå› ä¸ºæ­¤æ—¶å®¹å™¨çš„IPå€Ÿç”¨ä¸»æœºçš„ï¼Œ

æ‰€ä»¥å®¹å™¨å…±äº«å®¿ä¸»æœºç½‘ç»œIPï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å¤–éƒ¨ä¸»æœºä¸å®¹å™¨å¯ä»¥ç›´æ¥é€šä¿¡ã€‚
```

![1670082597383](image/dockerç½‘ç»œ/1670082597383.png)

```md
ä»‹ç»ï¼š
ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„ IP åœ°å€ä¸å¤–ç•Œè¿›è¡Œé€šä¿¡ï¼Œä¸å†éœ€è¦é¢å¤–è¿›è¡ŒNAT è½¬æ¢ã€‚
```

```md
å®¹å™¨å°†ä¸ä¼šè·å¾—ä¸€ä¸ªç‹¬ç«‹çš„Network Namespaceï¼Œ è€Œæ˜¯å’Œå®¿ä¸»æœºå…±ç”¨ä¸€ä¸ªNetwork Namespaceã€‚å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡è€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„IPå’Œç«¯å£ã€‚
```

![1670082108621](image/dockerç½‘ç»œ/1670082108621.png)

###### 3ã€none:

```md
é€šä¿—è§£é‡Šï¼šè¿™å°±æ˜¯å°±ä¸€ä¸ªå¥¶èŒ¶æ¯å­ï¼Œé‡Œé¢ä¹Ÿæ²¡æœ‰å¥¶èŒ¶ï¼Œå°±ä¸€ä¸ªæ¯å­(lo)
```

```md
docker run -d -p 8084:8080 --network none --name t1 tomcat
```

![1670083272455](image/dockerç½‘ç»œ/1670083272455.png)
![1670083287362](image/dockerç½‘ç»œ/1670083287362.png)

```md
ä»‹ç»ï¼š

åœ¨noneæ¨¡å¼ä¸‹ï¼Œå¹¶ä¸ä¸ºDockerå®¹å™¨è¿›è¡Œä»»ä½•ç½‘ç»œé…ç½®ã€‚Â 

ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªDockerå®¹å™¨æ²¡æœ‰ç½‘å¡ã€IPã€è·¯ç”±ç­‰ä¿¡æ¯ï¼Œåªæœ‰ä¸€ä¸ªlo

éœ€è¦æˆ‘ä»¬è‡ªå·±ä¸ºDockerå®¹å™¨æ·»åŠ ç½‘å¡ã€é…ç½®IPç­‰ã€‚
```

###### 4ã€container:

```md
é€šä¿—è§£é‡Šï¼š
å°±æ˜¯t1åœ¨å–å¥¶èŒ¶ï¼Œè€Œt2ä¹Ÿæƒ³å–ï¼Œç›´æ¥ç”¨t1çš„å¸ç®¡å–å¥¶èŒ¶ï¼Œä½†æ˜¯å°±æ˜¯ï¼Œå¸ç®¡åªèƒ½ä¸€ä¸ªäººç”¨ï¼Œç®—æ˜¯äº‰ç”¨ä¸€ä¸ªç«¯å£ï¼Œéƒ¨åˆ†æƒ…å†µå¯ä»¥ä¸€èµ·ç”¨ï¼Œä½†æ˜¯ï¼Œå¸ç®¡æ¯•ç«Ÿæ˜¯t1çš„ï¼Œå½“t1ä¸æƒ³å–å¥¶èŒ¶ï¼ˆå³t1å…³é—­ï¼‰çš„æ—¶å€™ï¼Œt2å°±å†ä¹Ÿå–ä¸äº†å¥¶èŒ¶ã€‚å®¹å™¨å®ä¾‹å†…çš„ip a,t1ä¸t2æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œå¦‚æœt1å…³é—­ï¼Œt2çš„ip a å°±åªæœ‰ä¸€ä¸ªlo,ç›¸å½“äºnoneç½‘ç»œæ¨¡å¼
```

![1670083858217](image/dockerç½‘ç»œ/1670083858217.png)
è¿™ç§æƒ…å†µä¼šå‡ºç°ç«¯å£äº‰ç”¨ï¼ŒTomcatä¸é€‚åˆæ¼”ç¤º

```md
ä»‹ç»ï¼šcontainerâ½¹ç»œæ¨¡å¼Â 

æ–°å»ºçš„å®¹å™¨å’Œå·²ç»å­˜åœ¨çš„ä¸€ä¸ªå®¹å™¨å…±äº«ä¸€ä¸ªç½‘ç»œipé…ç½®è€Œä¸æ˜¯å’Œå®¿ä¸»æœºå…±äº«ã€‚æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº«IPã€ç«¯å£èŒƒå›´ç­‰ã€‚åŒæ ·ï¼Œä¸¤ä¸ªå®¹å™¨é™¤äº†ç½‘ç»œæ–¹é¢ï¼Œå…¶ä»–çš„å¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯éš”ç¦»çš„ã€‚
```

![1670083356610](image/dockerç½‘ç»œ/1670083356610.png)

Alpine Linux æ˜¯ä¸€æ¬¾ç‹¬ç«‹çš„ã€éå•†ä¸šçš„é€šç”¨ Linux å‘è¡Œç‰ˆï¼Œä¸“ä¸ºè¿½æ±‚å®‰å…¨æ€§ã€ç®€å•æ€§å’Œèµ„æºæ•ˆç‡çš„ç”¨æˆ·è€Œè®¾è®¡ã€‚ å¯èƒ½å¾ˆå¤šäººæ²¡å¬è¯´è¿‡è¿™ä¸ª Linux å‘è¡Œç‰ˆæœ¬ï¼Œä½†æ˜¯ç»å¸¸ç”¨ Docker çš„æœ‹å‹å¯èƒ½éƒ½ç”¨è¿‡ï¼Œå› ä¸ºä»–å°ï¼Œç®€å•ï¼Œå®‰å…¨è€Œè‘—ç§°ï¼Œæ‰€ä»¥ä½œä¸ºåŸºç¡€é•œåƒæ˜¯éå¸¸å¥½çš„ä¸€ä¸ªé€‰æ‹©ï¼Œå¯è°“æ˜¯éº»é›€è™½å°ä½†äº”è„ä¿±å…¨ï¼Œé•œåƒéå¸¸å°å·§ï¼Œä¸åˆ° 6Mçš„å¤§å°ï¼Œæ‰€ä»¥ç‰¹åˆ«é€‚åˆå®¹å™¨æ‰“åŒ…ã€‚
![1670084112202](image/dockerç½‘ç»œ/1670084112202.png)

###### 5ã€è‡ªå®šä¹‰ç½‘ç»œï¼š

```md
å…¶å®å°±æ˜¯åœ¨bridgeçš„åŸºç¡€ä¸Šå˜åŠ¨äº†ä¸€ç‚¹ã€‚

å®¹å™¨ä¸å®¹å™¨ä¹‹é—´è¿›è¡Œç½‘ç»œé€šä¿¡

å› ä¸ºdockerå®¹å™¨å†…çš„ipæ˜¯å¯èƒ½å‘ç”Ÿå˜åŒ–çš„ï¼Œé™¤éæ˜¯é‚£äº›
å½“å®¹å™¨ipå˜åŠ¨çš„æ—¶å€™å¯ä»¥é€šè¿‡ç½‘ç»œåç›´æ¥è¿›è¡Œç½‘ç»œé€šä¿¡è€Œä¸å—å½±å“ã€‚ping 192... å˜æˆ ping å®¹å™¨nameï¼Œè‡ªå®šä¹‰ç½‘ç»œæ˜¯å¯ä»¥è¿›è¡Œping nameçš„ï¼Œå…¶ä»–ç½‘è·¯æ¨¡å¼ä¸è¡Œï¼Œåªèƒ½ping ipã€‚
```

```md
å…¶å®å°±æ˜¯åœ¨bridgeçš„åŸºç¡€ä¸Šå˜åŠ¨äº†ä¸€ç‚¹ã€‚

é¦–å…ˆï¼šdocker network create zidingyi-network

[root@localhost ~]# docker network ls
NETWORK ID     NAME               DRIVER    SCOPE
654e6701165e   bridge             bridge    local
9a9a0282c113   host               host      local
4c2a44e440e5   none               null      local
70a276919551   zidingyi-network   bridge    local

ç„¶åï¼š
```

![1670085234965](image/dockerç½‘ç»œ/1670085234965.png)
ping name è¿›è¡Œæµ‹è¯•

![1670085381684](image/dockerç½‘ç»œ/1670085381684.png)

## ğŸ³dockerå¹³å°æ¶æ„å›¾è§£
```md
ä»å…¶æ¶æ„å’Œè¿è¡Œæµç¨‹æ¥çœ‹ï¼ŒDocker æ˜¯ä¸€ä¸ª C/S æ¨¡å¼çš„æ¶æ„ï¼Œåç«¯æ˜¯ä¸€ä¸ªæ¾è€¦åˆæ¶æ„ï¼Œä¼—å¤šæ¨¡å—å„å¸å…¶èŒã€‚Â 

Docker è¿è¡Œçš„åŸºæœ¬æµç¨‹ä¸ºï¼š

1 ç”¨æˆ·æ˜¯ä½¿ç”¨ Docker Client ä¸ Docker Daemon å»ºç«‹é€šä¿¡ï¼Œå¹¶å‘é€è¯·æ±‚ç»™åè€…ã€‚

2 Docker Daemon ä½œä¸º Docker æ¶æ„ä¸­çš„ä¸»ä½“éƒ¨åˆ†ï¼Œé¦–å…ˆæä¾› Docker Server çš„åŠŸèƒ½ä½¿å…¶å¯ä»¥æ¥å— Docker Client çš„è¯·æ±‚ã€‚

3 Docker Engine æ‰§è¡Œ Docker å†…éƒ¨çš„ä¸€ç³»åˆ—å·¥ä½œï¼Œæ¯ä¸€é¡¹å·¥ä½œéƒ½æ˜¯ä»¥ä¸€ä¸ª Job çš„å½¢å¼çš„å­˜åœ¨ã€‚

4 Job çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“éœ€è¦å®¹å™¨é•œåƒæ—¶ï¼Œåˆ™ä» Docker Registry ä¸­ä¸‹è½½é•œåƒï¼Œå¹¶é€šè¿‡é•œåƒç®¡ç†é©±åŠ¨ Graph driverå°†ä¸‹è½½é•œåƒä»¥Graphçš„å½¢å¼å­˜å‚¨ã€‚

5 å½“éœ€è¦ä¸º Docker åˆ›å»ºç½‘ç»œç¯å¢ƒæ—¶ï¼Œé€šè¿‡ç½‘ç»œç®¡ç†é©±åŠ¨ Network driver åˆ›å»ºå¹¶é…ç½® Docker å®¹å™¨ç½‘ç»œç¯å¢ƒã€‚

6 å½“éœ€è¦é™åˆ¶ Docker å®¹å™¨è¿è¡Œèµ„æºæˆ–æ‰§è¡Œç”¨æˆ·æŒ‡ä»¤ç­‰æ“ä½œæ—¶ï¼Œåˆ™é€šè¿‡ Execdriver æ¥å®Œæˆã€‚

7 Libcontaineræ˜¯ä¸€é¡¹ç‹¬ç«‹çš„å®¹å™¨ç®¡ç†åŒ…ï¼ŒNetwork driverä»¥åŠExec driveréƒ½æ˜¯é€šè¿‡Libcontaineræ¥å®ç°å…·ä½“å¯¹å®¹å™¨è¿›è¡Œçš„æ“ä½œã€‚
```
![1670085466132](image/dockerç½‘ç»œ/1670085466132.png)